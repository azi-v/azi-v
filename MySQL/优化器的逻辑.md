
选择索引是优化器的工作
优化器选择索引的目的，是确定最优的执行方案，用最小的代价去执行语句。
在数据库中，扫描行数是影响执行代价的因素之一，扫描的行数越少，意味着访问磁盘数据的次数越少，消耗CPU资源越少。以及是否使用临时表、是否排序。

优化器如何判断扫描行数
MySQL在真正执行语句前，是根据统计信息估算记录数。
统计信息就是索引的区分度，一个索引上不同的值越多，这个索引的区分度就越好。一个索引上不同的值的个数，我们称为“基数”。基数越大，索引的区分度越好。

使用show index方法，看到索引的基数

MySQL使用采样统计得到索引基数
因为把整张表取出来一行行统计，可以得到精确的结果，但是代价太高。
采样统计的时候，InnoDB默认会选择N个数据页，统计这些页面上的不同值，得到一个平均值，然后乘以这个索引的页面数，得到这个索引的基数。

存储索引统计的方式，通过innodb_stats_persistent的值来选择：
	• 设置为on，持久化存储。N：20，M：10；
	• 设置为off，只存储内存中。N：8，M：16；

analyze table t命令，用来重新统计索引信息；
force index强行选择索引；
